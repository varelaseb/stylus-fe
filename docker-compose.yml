services:
  stylus-frontend:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        VITE_MCP_TARGET: ${VITE_MCP_TARGET:-local}
        VITE_MCP_LOCAL_BASE_URL: ${VITE_MCP_LOCAL_BASE_URL:-}
        VITE_MCP_REMOTE_BASE_URL: ${VITE_MCP_REMOTE_BASE_URL:-https://sifter.azule.xyz}
        VITE_SKILLS_API_BASE_URL: ${VITE_SKILLS_API_BASE_URL:-}
        VITE_OPENROUTER_PROXY_URL: ${VITE_OPENROUTER_PROXY_URL:-/openrouter/chat/completions}
        VITE_LLM_MODEL: ${VITE_LLM_MODEL:-openai/gpt-4o-mini}
        VITE_LLM_FALLBACK_MODEL: ${VITE_LLM_FALLBACK_MODEL:-anthropic/claude-3.5-haiku}
        VITE_SKILLS_INSTALLER_PACKAGE: ${VITE_SKILLS_INSTALLER_PACKAGE:-sift-stylus}
        VITE_SKILLS_INSTALL_REPO: ${VITE_SKILLS_INSTALL_REPO:-getFairAI/angel-stylus-coding-assistant}
        VITE_PROJECT_GITHUB_URL: ${VITE_PROJECT_GITHUB_URL:-}
        VITE_PROJECT_X_URL: ${VITE_PROJECT_X_URL:-}
    ports:
      - "${FRONTEND_PORT:-5173}:80"
    networks:
      stylus-dev-net:
        aliases:
          - stylus-frontend
    restart: unless-stopped

networks:
  stylus-dev-net:
    external: true
    name: stylus-dev-net
