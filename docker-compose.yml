services:
  stylus-frontend:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        VITE_MCP_SERVER_URL: ${VITE_MCP_SERVER_URL:-https://api.emberai.xyz/mcp}
        VITE_SEARCH_API_URL: ${VITE_SEARCH_API_URL:-/stylus-chat}
        VITE_OPENROUTER_PROXY_URL: ${VITE_OPENROUTER_PROXY_URL:-/openrouter/chat/completions}
        VITE_LLM_SYSTEM_PROMPT: ${VITE_LLM_SYSTEM_PROMPT:-}
        VITE_LLM_MODEL: ${VITE_LLM_MODEL:-openai/gpt-4o-mini}
        VITE_LLM_FALLBACK_MODEL: ${VITE_LLM_FALLBACK_MODEL:-anthropic/claude-3.5-haiku}
        VITE_PROJECT_GITHUB_URL: ${VITE_PROJECT_GITHUB_URL:-}
        VITE_PROJECT_X_URL: ${VITE_PROJECT_X_URL:-}
    ports:
      - "${FRONTEND_PORT:-5173}:80"
    networks:
      stylus-dev-net:
        aliases:
          - stylus-frontend
    restart: unless-stopped

networks:
  stylus-dev-net:
    external: true
    name: stylus-dev-net
